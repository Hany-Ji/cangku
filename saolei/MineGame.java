import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.border.*;
import java.util.*;
import java.io.*;
public class MineGame extends JFrame implements ActionListener{// JFrame要显示需要调用setVisable(true);
     JMenuBar bar;
     JMenu fileMenu;
     JMenuItem 初级,中级,高级,扫雷英雄榜;
     MineArea mineArea=null;
     File 英雄榜=new File("英雄榜.txt");
     Hashtable hashtable=null;
     ShowRecord showHeroRecord=null;
     MineGame(){
         mineArea=new MineArea(8,8,10,1);//加上图形界面
         add(mineArea,BorderLayout.CENTER);
         bar=new JMenuBar();//添加菜单栏，菜单，菜单项
         fileMenu=new JMenu("游戏");
         初级=new JMenuItem("简单");
         中级=new JMenuItem("一般");
         高级=new JMenuItem("困难");
         扫雷英雄榜=new JMenuItem("扫雷英雄榜");  
         Font f=new Font("宋体",Font.BOLD,20);
         初级.setFont(f);
         高级.setFont(f);
         中级.setFont(f);
         扫雷英雄榜.setFont(f);
         fileMenu.setFont(f);
         fileMenu.add(初级);
         fileMenu.add(中级);
         fileMenu.add(高级);
         fileMenu.add(扫雷英雄榜);
         bar.add(fileMenu);
         setJMenuBar(bar);
         初级.addActionListener(this);
         中级.addActionListener(this);
         高级.addActionListener(this);
         扫雷英雄榜.addActionListener(this);
         hashtable=new Hashtable();
         hashtable.put("初级","初级#"+999+"#匿名"); //添加成绩初始定义
         hashtable.put("中级","中级#"+999+"#匿名");
         hashtable.put("高级","高级#"+999+"#匿名");
         if(!英雄榜.exists()) {
            try{ FileOutputStream out=new FileOutputStream(英雄榜);
                 ObjectOutputStream objectOut=new ObjectOutputStream(out);
                 objectOut.writeObject(hashtable);
                 objectOut.close();
                 out.close();
            }
            catch(IOException e){}
        }
        showHeroRecord=new ShowRecord(this,hashtable);//添加 更新的成绩
        setBounds(100,100,480,480);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        validate();
     }
     public void actionPerformed(ActionEvent e){
        if(e.getSource()==初级){
              mineArea.initMineArea(9,9,10,1);
              setBounds(100,100,480,580); 
        }
        if(e.getSource()==中级){
              mineArea.initMineArea(16,16,40,2);
              setBounds(100,100,680,780);
        }
        if(e.getSource()==高级){
              mineArea.initMineArea(16,30,99,3);
              setBounds(100,100,1200,780);
        }
        if(e.getSource()==扫雷英雄榜){ 
          if(showHeroRecord!=null)
           showHeroRecord.setVisible(true);
        }
        validate();
    }
    public static void main(String args[]){//启动游戏
        new MineGame();
    }
}
